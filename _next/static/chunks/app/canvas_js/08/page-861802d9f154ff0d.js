(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6819],{8597:function(t,e,s){Promise.resolve().then(s.bind(s,4074))},4074:function(t,e,s){"use strict";s.r(e);var i=s(7437),h=s(1160),n=s(3025);class r{update(){let t=this.head.add(this.speed);for(this.body.push(this.head),this.head=t,this.head.x>a&&(this.head=new n.Z(0,this.head.y)),this.head.x<0&&(this.head=new n.Z(a,this.head.y)),this.head.y<0&&(this.head=new n.Z(this.head.x,a)),this.head.y>a&&(this.head=new n.Z(this.head.x,0));this.body.length>this.maxLen;)this.body.shift()}constructor(){this.color="#F4E0B9",this.body=[],this.head=new n.Z(0,0),this.speed=new n.Z(1,0),this.maxLen=5;let t=t=>{let{key:e}=t,s=this.speed;switch(e){case"w":s=new n.Z(0,-1);break;case"s":s=new n.Z(0,1);break;case"a":s=new n.Z(-1,0);break;case"d":s=new n.Z(1,0)}s.eq(this.speed.mul(-1))||(this.speed=s)};window.removeEventListener("keydown",t),window.addEventListener("keydown",t)}}let a=42;class o{init(){let t=this.gridSize*this.blockNum+(this.blockNum-1)*this.space;this.ctx.canvas.width=t,this.ctx.canvas.height=t,this.snake=new r,this.createFood()}draw(){let{ctx:t}=this;if(this.drawScreen(),this.snake){let{color:t}=this.snake;this.snake.body.forEach(e=>{this.drawBlock(e.x,e.y,t)})}this.food&&this.drawBlock(this.food.x,this.food.y,"#D83F31")}drawScreen(){let{ctx:t}=this;t.beginPath(),t.fillStyle="#27005D",t.fillRect(0,0,t.canvas.width,t.canvas.height);for(let t=0;t<this.blockNum;t++)for(let e=0;e<this.blockNum;e++)this.drawBlock(t,e,"#4D2DB7")}drawBlock(t,e,s){let{ctx:i}=this,h=this.changePos(t,e);i.save(),i.beginPath(),i.fillStyle=s,i.translate(h.x,h.y),i.rect(0,0,this.gridSize,this.gridSize),i.fill(),i.restore()}changePos(t,e){return{x:t*this.space+t*this.gridSize,y:e*this.space+e*this.gridSize}}update(){var t,e;null===(t=this.snake)||void 0===t||t.update(),null===(e=this.snake)||void 0===e||e.body.forEach(t=>{t.eq(this.food)&&this.snake&&(this.createFood(),this.snake.maxLen++)})}createFood(){let t=parseInt(""+Math.random()*a),e=parseInt(""+Math.random()*a);this.food=new n.Z(t,e),this.createFoodShowAnim()}createFoodShowAnim(){let{ctx:t}=this,e=2,s=()=>{e++;let i=this.changePos(this.food.x,this.food.y);t.save(),t.beginPath(),t.strokeStyle="rgba(255, 105, 105,".concat((100-e)/100,")"),t.arc(i.x+5,i.y+5,e,0,2*Math.PI),t.lineWidth=3,t.stroke(),t.restore(),e<100&&requestAnimationFrame(s)};s()}constructor(t){this.gridSize=10,this.blockNum=a,this.space=10,this.ctx=t}}e.default=t=>{let e;let s=async(t,s)=>{(e=new o(t)).init()};return(0,i.jsx)("main",{className:"absolute  h-full w-full  bg-[#27005D] p-5 ",children:(0,i.jsx)(h.Z,{className:"bg-white  max-w-full shadow-lg border-solid ",draw:t=>{e.draw()},init:s,update:t=>{e.update()},time:150})})}},1160:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});var i=s(7437),h=s(2265);let n=function(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3/30,n={time:i},r=(0,h.useRef)(null);return(0,h.useEffect)(()=>{if(!r.current)return;let h=r.current,a=h.getContext("2d"),o=0,l=0;if(a){e&&e(a,n);let h=()=>{t(a,++o,n),l=requestAnimationFrame(h)};s&&setInterval(()=>{console.log("fps",n.time),s(a,o,n)},i),h()}return()=>{window.cancelAnimationFrame(l)}},[t]),r};var r=t=>{let{draw:e,init:s,update:h,time:r,...a}=t,o=n(e,s,h,r);return(0,i.jsx)("canvas",{ref:o,...a})}},3025:function(t,e){"use strict";class s{static Polar(t,e){let i=e*(Math.PI/180),h=Math.cos(i)*t,n=Math.sin(i)*t;return new s(h,n)}set(t,e){return this.x=t,this.y=e,this}add(t){return new s(this.x+t.x,this.y+t.y)}sub(t){return new s(this.x-t.x,this.y-t.y)}mul(t){return new s(this.x*t,this.y*t)}unit(){return this.mul(1/this.length)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}set length(t){let e=this.unit().mul(t);this.set(e.x,e.y)}eq(t){return this.x===t.x&&this.y===t.y}clone(){return new s(this.x,this.y)}angle(){return Math.atan2(this.y,this.x)}deg(){return parseInt(" ".concat(this.angle()*(180/Math.PI)))}toString(){return"(".concat(Math.round(this.x),",").concat(Math.round(this.y),")")}draw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;t.save(),t.beginPath(),t.moveTo(0,0),t.rotate(this.angle()),t.lineTo(this.unit().mul(s+3).length,0),t.lineTo(this.unit().mul(s+3).length-3,-4),t.lineTo(this.unit().mul(s+3).length-3,4),t.lineTo(this.unit().mul(s+3).length,0),t.strokeStyle=e,t.lineWidth=3,t.stroke(),t.restore()}setRA(t,e){let i=e*(Math.PI/180),h=Math.cos(i)*t,n=Math.sin(i)*t;return new s(h,n)}constructor(t=0,e=0){this.x=0,this.y=0,this.set(t,e)}}s.PiToDeg=180/Math.PI,e.Z=s},622:function(t,e,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=s(2265),h=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(t,e,s){var i,o={},l=null,d=null;for(i in void 0!==s&&(l=""+s),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(d=e.ref),e)n.call(e,i)&&!a.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:h,type:t,key:l,ref:d,props:o,_owner:r.current}}e.jsx=o,e.jsxs=o},7437:function(t,e,s){"use strict";t.exports=s(622)}},function(t){t.O(0,[2971,596,1744],function(){return t(t.s=8597)}),_N_E=t.O()}]);